
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://kmkfw.io/scanners/">
      
      
        <link rel="prev" href="../rgb/">
      
      
        <link rel="next" href="../sequences/">
      
      
      <link rel="icon" href="../kmk_favicon.svg">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Scanners - KMKfw</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#scanners" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="KMKfw" class="md-header__button md-logo" aria-label="KMKfw" data-md-component="logo">
      
  <img src="../kmk_logo_nav.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KMKfw
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Scanners
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/KMKfw/kmk_firmware" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    KMK: Clackety Keyboards Powered by Python
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="KMKfw" class="md-nav__button md-logo" aria-label="KMKfw" data-md-component="logo">
      
  <img src="../kmk_logo_nav.svg" alt="logo">

    </a>
    KMKfw
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/KMKfw/kmk_firmware" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    KMK: Clackety Keyboards Powered by Python
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation index
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Display/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Display
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Getting_Started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Officially_Supported_Microcontrollers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Officially supported microcontrollers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../adns9800/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ADNS9800
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ble_hid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BLE HID
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../boot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    boot.py
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../capsword/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CapsWord
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cg_swap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ctrl GUI Swap
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../combo_layers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Combo Layers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../combos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Combos
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_and_keymap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring KMK
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dynamic_sequences/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dynamic Sequences
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../easypoint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AS5013 (aka 'EasyPoint')
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../encoder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Encoder module
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../extension_statusled/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Status LEDs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../extension_stringy_keymaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stringy Keymaps
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../extensions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extensions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../flashing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flashing Instructions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../handwiring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Handwire keyboards
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../holdtap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HoldTap Keycodes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../international/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    International Keycodes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../keycodes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Keys Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../keys/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Keys
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../kmkpython_vs_circuitpython/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KMKPython
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../layers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Layers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../led/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LED (Mono color backlight)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lock_status/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lock Status
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../media_keys/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Media Keys
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../midi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MIDI
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../mouse_keys/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mouse keys
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../oneshot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OneShot Keycodes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../peg_oled_display/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Peg OLED Display
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../peg_rgb_matrix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Peg RGB Matrix
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../pimoroni_trackball/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pimoroni Trackball
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../porting_to_kmk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Porting to KMK
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../power/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Power(save)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickpin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickpin
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../rapidfire/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RapidFire
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../rgb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RGB/Underglow/NeoPixel
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Scanners
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Scanners
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#keypad-scanners" class="md-nav__link">
    <span class="md-ellipsis">
      Keypad Scanners
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Keypad Scanners">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#keypad-matrixscanner" class="md-nav__link">
    <span class="md-ellipsis">
      keypad MatrixScanner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keypad-keysscanner" class="md-nav__link">
    <span class="md-ellipsis">
      keypad KeysScanner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keypad-shiftregisterkeys" class="md-nav__link">
    <span class="md-ellipsis">
      keypad ShiftRegisterKeys
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#digitalio-scanners" class="md-nav__link">
    <span class="md-ellipsis">
      Digitalio Scanners
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Digitalio Scanners">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#digitalio-matrixscanner" class="md-nav__link">
    <span class="md-ellipsis">
      digitalio MatrixScanner
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rotary-encoder-scanners" class="md-nav__link">
    <span class="md-ellipsis">
      Rotary Encoder Scanners
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rotary Encoder Scanners">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rotaryioencoder" class="md-nav__link">
    <span class="md-ellipsis">
      RotaryioEncoder
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scanner-base-class" class="md-nav__link">
    <span class="md-ellipsis">
      Scanner base class
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-scanners" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Scanners
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multiple Scanners">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-scanners-coord_mapping-and-keymap-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Scanners coord_mapping and keymap changes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sequences/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sequences
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../serialace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serial ACE (Arbitrary Code Execution over serial interface)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../split_keyboards/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Split Keyboards
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../steno/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Steno
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sticky_mod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sticky Mod
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../string_substitution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    String Substitution
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Support
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tapdance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tap Dance
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#keypad-scanners" class="md-nav__link">
    <span class="md-ellipsis">
      Keypad Scanners
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Keypad Scanners">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#keypad-matrixscanner" class="md-nav__link">
    <span class="md-ellipsis">
      keypad MatrixScanner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keypad-keysscanner" class="md-nav__link">
    <span class="md-ellipsis">
      keypad KeysScanner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keypad-shiftregisterkeys" class="md-nav__link">
    <span class="md-ellipsis">
      keypad ShiftRegisterKeys
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#digitalio-scanners" class="md-nav__link">
    <span class="md-ellipsis">
      Digitalio Scanners
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Digitalio Scanners">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#digitalio-matrixscanner" class="md-nav__link">
    <span class="md-ellipsis">
      digitalio MatrixScanner
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rotary-encoder-scanners" class="md-nav__link">
    <span class="md-ellipsis">
      Rotary Encoder Scanners
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rotary Encoder Scanners">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rotaryioencoder" class="md-nav__link">
    <span class="md-ellipsis">
      RotaryioEncoder
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scanner-base-class" class="md-nav__link">
    <span class="md-ellipsis">
      Scanner base class
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-scanners" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Scanners
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multiple Scanners">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-scanners-coord_mapping-and-keymap-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Scanners coord_mapping and keymap changes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="scanners">Scanners</h1>
<p>The default key scanner in KMK assumes a garden variety switch matrix, with
one diode per switch to prevent ghosting.
This doesn't cover all hardware designs though. With macro pads, for example, it
is very common to not have a matrix topology at all.
Boards like this aren't compatible with the default matrix scanner, so you will
need to swap it out with an alternative scanner.</p>
<h2 id="keypad-scanners">Keypad Scanners</h2>
<p>The scanners in <code>kmk.scanners.keypad</code> wrap the <code>keypad</code> module that ships with
CircuitPython and support the same configuration and tuning options as their
upstream. You can find out more in the <a href="https://docs.circuitpython.org/en/latest/shared-bindings/keypad/index.html">CircuitPython
documentation</a>.</p>
<h3 id="keypad-matrixscanner">keypad MatrixScanner</h3>
<p>This is the default scanner used by KMK.
It uses the CircuitPython builtin <code>keypad.KeyMatrix</code>.</p>
<pre><code class="language-python">from kmk.scanners.keypad import MatrixScanner

class MyKeyboard(KMKKeyboard):
    def __init__(self):
        # create and register the scanner
        self.matrix = MatrixScanner(
            # required arguments:
            column_pins=self.col_pins,
            row_pins=self.row_pins,
            # optional arguments with defaults:
            columns_to_anodes=DiodeOrientation.COL2ROW,
            interval=0.02,  # Debounce time in floating point seconds
            max_events=64
        )

</code></pre>
<h3 id="keypad-keysscanner">keypad KeysScanner</h3>
<p>The <code>keypad.Keys</code> scanner treats individual GPIO pins as discrete keys. To use
this scanner, provide a sequence of pins that describes the layout of your
board then include it in the initialization sequence of your keyboard class.</p>
<pre><code class="language-python">import board
from kmk.kmk_keyboard import KMKKeyboard
from kmk.scanners.keypad import KeysScanner


# GPIO to key mapping - each line is a new row.
_KEY_CFG = [
    board.SW3,  board.SW7,  board.SW11, board.SW15,
    board.SW2,  board.SW6,  board.SW10, board.SW14,
    board.SW1,  board.SW5,  board.SW9,  board.SW13,
    board.SW0,  board.SW4,  board.SW8,  board.SW12,
]


# Keyboard implementation class
class MyKeyboard(KMKKeyboard):
    def __init__(self):
        # create and register the scanner
        self.matrix = KeysScanner(
            # require argument:
            pins=_KEY_CFG,
            # optional arguments with defaults:
            value_when_pressed=False,
            pull=True,
            interval=0.02,  # Debounce time in floating point seconds
            max_events=64
        )
</code></pre>
<h3 id="keypad-shiftregisterkeys">keypad ShiftRegisterKeys</h3>
<p>This scanner can read keys attached to a parallel-in serial-out shift register
like the 74HC165 or CD4021. Note that you may chain shift registers to load in
as many values as you need.</p>
<pre><code class="language-python">from kmk.scanners.keypad import ShiftRegisterKeys

class MyKeyboard(KMKKeyboard):
    def __init__(self):
        # create and register the scanner
        self.matrix = ShiftRegisterKeys(
            # require arguments:
            clock=board.GP0,
            data=board.GP1,
            latch=board.GP2,
            key_count=8,
            # optional arguments with defaults:
            value_to_latch=True, # 74HC165: True, CD4021: False
            value_when_pressed=False,
            interval=0.02,  # Debounce time in floating point seconds
            max_events=64
        )
</code></pre>
<h2 id="digitalio-scanners">Digitalio Scanners</h2>
<h3 id="digitalio-matrixscanner">digitalio MatrixScanner</h3>
<p>The digitalio Matrix can scan over, as the name implies, <code>digitalio.DigitalInOut</code>
objects. That is especially useful if a matrix is build with IO-expanders.</p>
<pre><code class="language-python">from kmk.scanners.digitalio import MatrixScanner

class MyKeyboard(KMKKeyboard):
    def __init__(self):
        # create and register the scanner
        self.matrix = MatrixScanner(
            cols=self.col_pins,
            rows=self.row_pins,
            diode_orientation=self.diode_orientation,
            pull=digitalio.Pull.DOWN,
            rollover_cols_every_rows=None, # optional
        )
</code></pre>
<h2 id="rotary-encoder-scanners">Rotary Encoder Scanners</h2>
<h3 id="rotaryioencoder">RotaryioEncoder</h3>
<p>Matrix events from a quadrature ("rotary") encoder?</p>
<pre><code class="language-python">from kmk.scanners.encoder import RotaryioEncoder

class MyKeyboard(KMKKeyboard):
    def __init__(self):
        # create and register the scanner
        self.matrix = RotaryioEncoder(
            pin_a=board.GP0,
            pin_b=board.GP1,
            # optional
            divisor=4,
        )
</code></pre>
<h2 id="scanner-base-class"><code>Scanner</code> base class</h2>
<p>If you require a different type of scanner, you can create your own by
providing a subclass of <code>Scanner</code>. This is a very simple interface, it only
contains a single method, <code>scan_for_changes(self)</code> which returns a key report
if one exists, or <code>None</code> otherwise.</p>
<h2 id="advanced-configuration">Advanced Configuration</h2>
<h3 id="multiple-scanners">Multiple Scanners</h3>
<p>Sometimes a single scanner doesn't cover all hardware configurations. For
example: The bulk of the keyboard may be scanned with a matrix scanner, but a
couple of additional keys are directly connected to GPIOs.
In that case KMK allows you to define multiple scanners. The <code>KMKKeyboard.matrix</code> attribute can either be assigned a single scanner, or a list of scanners.
KMK assumes that successive scanner keys are consecutive, and populates
<code>KMKKeyboard.coord_mapping</code> accordingly; for convenience you may have to supply a <code>coord_mapping</code> that resembles your physical layout more closely (expanded below).</p>
<p>Example:</p>
<pre><code class="language-python">class MyKeyboard(KMKKeyboard):
    self.matrix = [
        MatrixScanner(...),
        KeysScanner(...),
        # etc...
    ]
</code></pre>
<h4 id="multiple-scanners-coord_mapping-and-keymap-changes">Multiple Scanners <code>coord_mapping</code> and keymap changes</h4>
<p>To add more scanners you need to add onto your <code>coord_mapping</code>.</p>
<p>Example:</p>
<p><code>coord_mapping</code> with just one <code>MatrixScanner</code> on a 58 key split keyboard:</p>
<pre><code class="language-python">coord_mapping = [
     0,  1,  2,  3,  4,  5,         35, 34, 33, 32, 31, 30,
     6,  7,  8,  9, 10, 11,         41, 40, 39, 38, 37, 36,
    12, 13, 14, 15, 16, 17,         47, 46, 45, 44, 43, 42,
    18, 19, 20, 21, 22, 23, 29, 59, 53, 52, 51, 50, 49, 48,
            25, 26, 27, 28,         58, 57, 56, 55, 
    ]
</code></pre>
<p><code>coord_mapping</code> using <code>MatrixScanner</code> and <code>RotaryioEncoder</code> on the same 58 key split keyboard with an encoder on each half:</p>
<pre><code class="language-python">coord_mapping = [
     0,  1,  2,  3,  4,  5,         37, 36, 35, 34, 33, 32,
     6,  7,  8,  9, 10, 11,         43, 42, 41, 40, 39, 38,
    12, 13, 14, 15, 16, 17,         49, 48, 47, 46, 45, 44,
    18, 19, 20, 21, 22, 23, 29, 61, 55, 54, 53, 52, 51, 50,
            25, 26, 27, 28,         60, 59, 58, 57,
            30, 31,                         62, 63 
    ]
</code></pre>
<p>On the top left side of a standard split keyboard <code>coord_mapping</code>, right below that you see a split keyboard where <code>RotaryioEncoder</code> and <code>MatrixScanner</code> (the default scanner) are used.
In the single scanner example, we used to count from 0 to 29 while the top right side starts at 30.
With the addition of the encoder scanner, the left side has 2 additional keys making it count up to 31 and the right side would then start at 32 and count to 63.
This means that keys 30, 31, 62, and 63 are for encoders.
Notice that all of the encoders are at the end of the array, because we put the encoder scanner after the matrix scanner in <code>keyboard.matrix</code>.
Therefore, we need to add 4 more key codes in the corresponding places of our <code>keyboard.keymap</code>, they will be used for the encoders.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>