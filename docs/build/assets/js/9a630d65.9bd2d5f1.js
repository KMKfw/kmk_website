"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[8152],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return k}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=r.createContext({}),c=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(i.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),k=a,m=p["".concat(i,".").concat(k)]||p[k]||d[k]||o;return n?r.createElement(m,s(s({ref:t},u),{},{components:n})):r.createElement(m,s({ref:t},u))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=p;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:a,s[1]=l;for(var c=2;c<o;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1660:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return i},default:function(){return k},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return d}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),s=["components"],l={},i="Lock Status",c={unversionedId:"lock_status",id:"lock_status",title:"Lock Status",description:"This extension exposes host-side locks like caps or num lock.",source:"@site/docs/lock_status.md",sourceDirName:".",slug:"/lock_status",permalink:"/docs/lock_status",draft:!1,editUrl:"https://github.com/KMKfw/kmk_firmware/tree/master/docs/lock_status.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"LED (Mono color backlight)",permalink:"/docs/led"},next:{title:"Media Keys",permalink:"/docs/media_keys"}},u={},d=[{value:"Enabling the extension",id:"enabling-the-extension",level:2},{value:"Read Lock Status",id:"read-lock-status",level:2},{value:"React to Lock Status Changes",id:"react-to-lock-status-changes",level:2}],p={toc:d};function k(e){var t=e.components,n=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"lock-status"},"Lock Status"),(0,o.kt)("p",null,"This extension exposes host-side locks like caps or num lock."),(0,o.kt)("h2",{id:"enabling-the-extension"},"Enabling the extension"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"from kmk.extensions.lock_status import LockStatus\n\nlocks = LockStatus()\nkeyboard.extensions.append(locks)\n\n")),(0,o.kt)("h2",{id:"read-lock-status"},"Read Lock Status"),(0,o.kt)("p",null,"Lock states can be retrieved with getter methods and are truth valued -- ",(0,o.kt)("inlineCode",{parentName:"p"},"True"),"\nwhen the lock is enabled and ",(0,o.kt)("inlineCode",{parentName:"p"},"False")," otherwise."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Method"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"locks.get_num_lock() ")),(0,o.kt)("td",{parentName:"tr",align:null},"Num Lock")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"locks.get_caps_lock() ")),(0,o.kt)("td",{parentName:"tr",align:null},"Caps Lock")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"locks.get_scroll_lock() ")),(0,o.kt)("td",{parentName:"tr",align:null},"Scroll Lock")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"locks.get_compose() ")),(0,o.kt)("td",{parentName:"tr",align:null},"Compose")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"locks.get_kana() ")),(0,o.kt)("td",{parentName:"tr",align:null},"Kana")))),(0,o.kt)("h2",{id:"react-to-lock-status-changes"},"React to Lock Status Changes"),(0,o.kt)("p",null,"The best way to react to changes in lock status is to extend\nthe LockStatus class. When a lock status change happens,\nthe 'after_hid_send' function is envoked so you would override\nLockStatus's to inject your own logic. Be aware though that\nthis function is also critically important to the functionality\nof LockStatus so be sure to invoke the 'super()' version of your\nclass to trigger the default functionality of LockStatus."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"# in your main.py\nfrom kb import KMKKeyboard\nfrom kmk.extensions.lock_status import LockStatus\nfrom kmk.extensions.LED import LED\n\nkeyboard = KMKKeyboard()\nleds = LED(led_pin=[board.GP27, board.GP28])\n\nclass LEDLockStatus(LockStatus):\n    def set_lock_leds(self):\n        if self.get_caps_lock():\n            leds.set_brightness(50, leds=[0])\n        else:\n            leds.set_brightness(0, leds=[0])\n\n        if self.get_scroll_lock():\n            leds.set_brightness(50, leds=[1])\n        else:\n            leds.set_brightness(0, leds=[1])\n\n    def after_hid_send(self, sandbox):\n        super().after_hid_send(sandbox)  # Critically important. Do not forget\n        if self.report_updated:\n            self.set_lock_leds()\n\nkeyboard.extensions.append(leds)\nkeyboard.extensions.append(LEDLockStatus())\n")))}k.isMDXComponent=!0}}]);