"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[9128],{3905:function(e,a,n){n.d(a,{Zo:function(){return d},kt:function(){return c}});var t=n(7294);function o(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function r(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?r(Object(n),!0).forEach((function(a){o(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function p(e,a){if(null==e)return{};var n,t,o=function(e,a){if(null==e)return{};var n,t,o={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(o[n]=e[n]);return o}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=t.createContext({}),s=function(e){var a=t.useContext(m),n=a;return e&&(n="function"==typeof e?e(a):i(i({},a),e)),n},d=function(e){var a=s(e.components);return t.createElement(m.Provider,{value:a},e.children)},l={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef((function(e,a){var n=e.components,o=e.mdxType,r=e.originalType,m=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),u=s(n),c=o,k=u["".concat(m,".").concat(c)]||u[c]||l[c]||r;return n?t.createElement(k,i(i({ref:a},d),{},{components:n})):t.createElement(k,i({ref:a},d))}));function c(e,a){var n=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=u;var p={};for(var m in a)hasOwnProperty.call(a,m)&&(p[m]=a[m]);p.originalType=e,p.mdxType="string"==typeof e?e:o,i[1]=p;for(var s=2;s<r;s++)i[s]=n[s];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}u.displayName="MDXCreateElement"},7417:function(e,a,n){n.r(a),n.d(a,{assets:function(){return d},contentTitle:function(){return m},default:function(){return c},frontMatter:function(){return p},metadata:function(){return s},toc:function(){return l}});var t=n(7462),o=n(3366),r=(n(7294),n(3905)),i=["components"],p={},m="Configurando KMK",s={unversionedId:"ptBR/config_and_keymap",id:"ptBR/config_and_keymap",title:"Configurando KMK",description:"KMK \xe9 configurado mediante uma enorme classe Python da velha guarda chamada",source:"@site/docs/ptBR/config_and_keymap.md",sourceDirName:"ptBR",slug:"/ptBR/config_and_keymap",permalink:"/docs/ptBR/config_and_keymap",draft:!1,editUrl:"https://github.com/KMKfw/kmk_firmware/tree/master/docs/ptBR/config_and_keymap.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"BLE HID",permalink:"/docs/ptBR/ble_hid"},next:{title:"Depura\xe7\xe3o",permalink:"/docs/ptBR/debugging"}},d={},l=[],u={toc:l};function c(e){var a=e.components,n=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,t.Z)({},u,n,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"configurando-kmk"},"Configurando KMK"),(0,r.kt)("p",null,"KMK \xe9 configurado mediante uma enorme classe Python da velha guarda chamada\n",(0,r.kt)("inlineCode",{parentName:"p"},"KMKKeyboard"),". Existem subclasses desta configura\xe7\xe3o que j\xe1 vem com padr\xf5es\npreviamente preenchidos para diversos teclados conhecidos (por exemple, muitos\nteclados QMK, TMK ou ZMK s\xe3o suportados com um nice!nano, ou mediante nosso\nadaptador de pinagem ItsyBitsy-para-ProMicro). Esta classe \xe9 a interface\nprincipal entre usu\xe1rios finais e os funcionamentos internos do KMK. Vamos\nmergulhar!"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Edite ou crie um arquivo chamado ",(0,r.kt)("inlineCode",{parentName:"p"},"main.py")," em nosso drive ",(0,r.kt)("inlineCode",{parentName:"p"},"CIRCUITPY"),". Voc\xea\ntamb\xe9m pode manter este arquivo em seu computador (possivelmente dentro de\n",(0,r.kt)("inlineCode",{parentName:"p"},"user_keymaps")," - sinta-se livre para submeter um PR com suas defini\xe7\xf5es de\nlayout!) e copie-o (seja manualmente, ou se voc\xea \xe9 adepto de ferramentas de\ndesenvolvimento e linha de comando, usando nosso\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/KMKfw/kmk_firmware/blob/master/docs/flashing.md"},"Makefile"),").\nDefinitivamente \xe9 recomendado que voc\xea mantenha uma c\xf3pia extra de seguran\xe7a\nem algum lugar que n\xe3o o micro-controlador - chips pifam, Circuitpython pode\nter problemas de corrup\xe7\xe3o. ou voc\xea pode estar em um dia ruim e apagar o\narquivo errado.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Atribuir uma inst\xe2ncia ",(0,r.kt)("inlineCode",{parentName:"p"},"KMKKeyboard")," a uma vari\xe1vel, por exemplo, ",(0,r.kt)("inlineCode",{parentName:"p"},"keyboard =\nKMKKeyboard()")," (note os par\xeanteses).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Certificar-se quie esta inst\xe2ncia de ",(0,r.kt)("inlineCode",{parentName:"p"},"KMKKeyboard")," \xe9 realmente executada ao\nfim do arquivo usando um bloco como este:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"if __name__ == '__main__':\n    keyboard.go()\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Atribuir os pinos e a orienta\xe7\xe3o do diodo (necess\xe1rio apenas em teclados\nartesanais), por exemplo:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"import board\n\nfrom kmk.scanners import DiodeOrientation\n\ncol_pins = (board.SCK, board.MOSI, board.MISO, board.RX, board.TX, board.D4)\nrow_pins = (board.D10, board.D11, board.D12, board.D13, board.D9, board.D6, board.D5, board.SCL)\nrollover_cols_every_rows = 4\ndiode_orientation = DiodeOrientation.COL2ROW\n")),(0,r.kt)("p",null,"Os pinos devem ser baseados naquilo que o CircuitPython chama de pinos na sua\nplaca particular. Voc\xea pode encontr\xe1-los na REPL do seu dispositivo\nCircuitPython:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"import board\nprint(dir(board))\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note: ",(0,r.kt)("inlineCode",{parentName:"p"},"rollover_cols_every_rows")," s\xf3 \xe9 suportado com\n",(0,r.kt)("inlineCode",{parentName:"p"},"DiodeOrientation.COLUMNS"),"/",(0,r.kt)("inlineCode",{parentName:"p"},"DiodeOrientation.COL2ROW"),", n\xe3o ",(0,r.kt)("inlineCode",{parentName:"p"},"DiodeOrientation.ROWS"),"/",(0,r.kt)("inlineCode",{parentName:"p"},"DiodeOrientation.ROW2COL"),". Este \xe9 usado em\nplacas como a Planck Rev6 que reusa pinos de coluna para simular uma matriz\n4x12 na forma de uma matriz 8x6.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Importe a lista global de defini\xe7\xf5es com ",(0,r.kt)("inlineCode",{parentName:"p"},"from kmk.keys import KC"),". Voc\xea pode\nou exibi-la no REPL como fizemos acima com ",(0,r.kt)("inlineCode",{parentName:"p"},"board"),", ou simplesmente olhar na\nnossa\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/KMKfw/kmk_firmware/blob/master/docs/keycodes.md"},"documenta\xe7\xe3o"),".\nTentamos manter a lista razoavelmente atualizada, mas se tiver algo faltando,\nvoc\xea pode ter que ler o arquivo-fonte ",(0,r.kt)("inlineCode",{parentName:"p"},"kmk/keys.py")," (e da\xed abrir um ticket\npara nos avisar que os documentos est\xe3o desatualizados, ou mesmo abrir um PR\najustando os documentos!)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Definir um keymap, que \xe9, em termos Python, uma lista de listas de objetos\n",(0,r.kt)("inlineCode",{parentName:"p"},"Key"),". Um keymap bem simples, para um teclado com apenas duas teclas f\xedsicas\nem apenas uma camada, teria essa apar\xeancia:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"keyboard.keymap = [[KC.A, KC.B]]\n")),(0,r.kt)("p",null,"Voc\xea pode definir um monte de outras coisas"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"keyboard.debug_enabled")," que vai atirar um monte de informa\xe7\xe3o de depura\xe7\xe3o\npara o console serial. Raramente isso \xe9 necess\xe1rio, mas pode fornecer\ninforma\xe7\xe3o verdadeiramente valiosa se voc\xea precisa abrir um ticket.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"keyboard.tap_time")," que define quanto tempo ",(0,r.kt)("inlineCode",{parentName:"p"},"KC.TT")," e ",(0,r.kt)("inlineCode",{parentName:"p"},"KC.LT"),' v\xe3o esperar\nantes de condiderar uma tecla "segurada" (veja ',(0,r.kt)("inlineCode",{parentName:"p"},"layers.md"),")."))))}c.isMDXComponent=!0}}]);